import{_ as p,M as o,p as i,q as c,R as s,t as n,N as t,a1 as e}from"./framework-ea2a9e6e.js";const l={},u=e(`<h2 id="初始项目" tabindex="-1"><a class="header-anchor" href="#初始项目" aria-hidden="true">#</a> 初始项目</h2><p>创建项目并安装需要的扩展包</p><h3 id="创建项目" tabindex="-1"><a class="header-anchor" href="#创建项目" aria-hidden="true">#</a> 创建项目</h3><p>首先创建项目</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>mkdir nodejs
npm init <span class="token operator">-</span>y
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="依赖包" tabindex="-1"><a class="header-anchor" href="#依赖包" aria-hidden="true">#</a> 依赖包</h3><p>然后安装依赖包</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>npm install chalk figlet inquirer nanospinner obtain<span class="token operator">-</span>git<span class="token operator">-</span>repo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>依赖包说明</p>`,9),r={href:"https://github.com/chalk/chalk",target:"_blank",rel:"noopener noreferrer"},d={href:"https://github.com/patorjk/figlet.js",target:"_blank",rel:"noopener noreferrer"},k={href:"https://github.com/SBoudrias/Inquirer.js",target:"_blank",rel:"noopener noreferrer"},v={href:"https://github.com/usmanyunusov/nanospinner",target:"_blank",rel:"noopener noreferrer"},m={href:"https://github.com/asasugar/obtain-git-repo",target:"_blank",rel:"noopener noreferrer"},b={href:"https://github.com/sindresorhus/terminal-link",target:"_blank",rel:"noopener noreferrer"},h=e(`<h3 id="package-json" tabindex="-1"><a class="header-anchor" href="#package-json" aria-hidden="true">#</a> package.json</h3><p>下面是最终的package.json文件内容</p><ul><li>添加 <code>&quot;type&quot;: &quot;module&quot;</code> 即使用es6模块</li><li>选项<code>bin</code> 用于定义命令名称与执行文件</li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node-vue&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nodejs脚手架&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MIT&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;bin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;node-vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nodejs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;node-vue&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;node&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;files&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;utils&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;format&quot;</span><span class="token operator">:</span> <span class="token string">&quot;prettier --write \\&quot;./**/*.{js,json}\\&quot;&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;chalk&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.1.2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;figlet&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.5.2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;inquirer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^9.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nanospinner&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;obtain-git-repo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.2&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;prettier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.7.1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="项目代码" tabindex="-1"><a class="header-anchor" href="#项目代码" aria-hidden="true">#</a> 项目代码</h2><p>实现最终的命令代码</p><h3 id="编写代码" tabindex="-1"><a class="header-anchor" href="#编写代码" aria-hidden="true">#</a> 编写代码</h3><p>创建 <code>index.js</code>文件，用于项目代码的编写</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token hashbang comment">#!/usr/bin/env node</span>

<span class="token doc-comment comment">/**
 * node-vue
 * 前端脚手架
 * <span class="token keyword">@author</span> 
 */</span>
<span class="token keyword">import</span> chalk <span class="token keyword">from</span> <span class="token string">&#39;chalk&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> inquirer <span class="token keyword">from</span> <span class="token string">&#39;inquirer&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> fs <span class="token keyword">from</span> <span class="token string">&#39;fs&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> download <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;obtain-git-repo&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createSpinner <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;nanospinner&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> figlet <span class="token keyword">from</span> <span class="token string">&#39;figlet&#39;</span><span class="token punctuation">;</span>

<span class="token function">figlet</span><span class="token punctuation">(</span><span class="token string">&#39;node.com&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//打印文字图案</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//可点击链接</span>
  <span class="token keyword">const</span> douyin <span class="token operator">=</span> <span class="token function">terminalLink</span><span class="token punctuation">(</span><span class="token string">&#39;抖音&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;https://www.node.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> bilibli <span class="token operator">=</span> <span class="token function">terminalLink</span><span class="token punctuation">(</span><span class="token string">&#39;bilibli&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;https://www.node.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    chalk<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>douyin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">与</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>bilibli<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">//询问用户</span>
  <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token keyword">await</span> inquirer<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;dirname&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;input&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;请输入目录名&#39;</span><span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&#39;node-vue&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">//目录是否已经存在</span>
  <span class="token keyword">const</span> dirIsExists <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>dirname<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>dirIsExists<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">redBright</span><span class="token punctuation">(</span><span class="token string">&#39;目录已经存在&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">//显示下载动画</span>
    <span class="token keyword">const</span> spinner <span class="token operator">=</span> <span class="token function">createSpinner</span><span class="token punctuation">(</span><span class="token string">&#39;开始下载...&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//下载git代码</span>
    <span class="token function">download</span><span class="token punctuation">(</span>
      <span class="token string">&#39;direct:https://gitee.com/node/vue&#39;</span><span class="token punctuation">,</span>
      message<span class="token punctuation">.</span>dirname<span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">clone</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          spinner<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;下载失败&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          spinner<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;项目创建成功，请依次执行以下命令&#39;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">white</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">cd </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>message<span class="token punctuation">.</span>dirname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">white</span><span class="token punctuation">(</span><span class="token string">&#39;npm install&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">white</span><span class="token punctuation">(</span><span class="token string">&#39;npm run dev&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="测试执行" tabindex="-1"><a class="header-anchor" href="#测试执行" aria-hidden="true">#</a> 测试执行</h3><p>在项目中执行以下命令进行测试</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>node <span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="发布项目" tabindex="-1"><a class="header-anchor" href="#发布项目" aria-hidden="true">#</a> 发布项目</h2>`,13),g={href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"},q=s("h3",{id:"首次提交",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#首次提交","aria-hidden":"true"},"#"),n(" 首次提交")],-1),w={href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"},f=e(`<p>然后在命令行进行登录，如果你使用了 <code>nrm</code> 等命令切换过源，需要更改为npm 官方源</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm login
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>进入项目目录，并执行以下命令发布包</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm publish 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,4),y={href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"},_=e(`<h3 id="更新版本" tabindex="-1"><a class="header-anchor" href="#更新版本" aria-hidden="true">#</a> 更新版本</h3><p>修改扩展包代码后，需要修改<code>package.json</code>中的<code>version</code> 后，再执行</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm publish
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="用户安装" tabindex="-1"><a class="header-anchor" href="#用户安装" aria-hidden="true">#</a> 用户安装</h2><p>其他用户要执行咱们的命令，首先需要全局安装</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>npm install <span class="token operator">-</span>g node<span class="token operator">-</span>vue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后就可以执行命令了</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>node<span class="token operator">-</span>vue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,8);function x(j,I){const a=o("ExternalLinkIcon");return i(),c("div",null,[u,s("ul",null,[s("li",null,[s("a",r,[n("chalk (opens new window)"),t(a)]),n("命令行颜色")]),s("li",null,[s("a",d,[n("figlet (opens new window)"),t(a)]),n("显示文本图像")]),s("li",null,[s("a",k,[n("inquirer (opens new window)"),t(a)]),n("接收用户输入")]),s("li",null,[s("a",v,[n("nanospinner (opens new window)"),t(a)]),n("显示进度")]),s("li",null,[s("a",m,[n("obtain-git-repo (opens new window)"),t(a)]),n("下载git代码")]),s("li",null,[s("a",b,[n("terminal-link (opens new window)"),t(a)]),n("文本链接")])]),h,s("p",null,[n("将扩展包提交到"),s("a",g,[n("npmjs (opens new window)"),t(a)]),n("，供其他用户使用")]),q,s("p",null,[n("你需要先在 "),s("a",w,[n("https://www.npmjs.com/ (opens new window)"),t(a)]),n("注册帐号")]),f,s("p",null,[n("然后登录 "),s("a",y,[n("https://www.npmjs.com/ (opens new window)"),t(a)]),n("就可以查看到包了")]),_])}const E=p(l,[["render",x],["__file","开发扩展包.html.vue"]]);export{E as default};
